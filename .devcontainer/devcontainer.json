{
    "name": "Distroless Builder Environment",
    "image": "mcr.microsoft.com/devcontainers/base:bookworm",
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
    ],
    "features": {
        "ghcr.io/devcontainers/features/docker-in-docker:2": {
            "version": "latest",
            "moby": true
        }
    },
    "onCreateCommand": "apt-get update && export DEBIAN_FRONTEND=noninteractive && apt-get -y install --no-install-recommends wget apt-transport-https ca-certificates gnupg just && \\\nwget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | gpg --dearmor | tee /usr/share/keyrings/trivy.gpg > /dev/null && \\\necho 'deb [signed-by=/usr/share/keyrings/trivy.gpg] https://aquasecurity.github.io/trivy-repo/deb bookworm main' | tee -a /etc/apt/sources.list.d/trivy.list && \\\nchmod +x /usr/local/bin/hadolint && \\\napt-get update && apt-get -y install --no-install-recommends trivy",
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-azuretools.vscode-docker",
                "hadolint.hadolint",
                "redhat.vscode-yaml",
                "timonwong.shellcheck",
                "skellock.just"
            ]
        }
    },
    "postCreateCommand": "echo 'Welcome! Docker, Trivy, and Just are installed.'",
    "remoteUser": "vscode"
}